local a=require("basalt")local b=require("Screens.selectionBase")local c=require("Screens.confirmDialog")local d=require("Screens.errorDialog")local e=require("Screens.acceptDialog")local f=require("atmAPI")local g=require("itemManager")local function h(i)local j;local k;local l;local function m()local n=g.digitizeAllItems(CONFIG.CURRENCYITEM)local o,p=pcall(function()return f.deposit(l.acc,n,l.pin)end)if not o then local q=p:match(":%d+: (.+)")or p;if q=="Failed to contact the server!"then d(j,k,{"Server not reachable.","Try again later!"})elseif q=="Error: Incorrect PIN entered."then d(j,k,{"Incorrect PIN","Please try again."})else d(j,k,{"An error occurred: ",q})end;g.materializeItems(n)else e(j,k,{"Your balance is now:",p},l)end end;local function r()local s=g.getCurrency(CONFIG.CURRENCYITEM)if s==0 then d(j,k,{"You can't deposit nothing!"})else c(j,k,"Deposit "..s.." "..CONFIG.CURRENCYNAME.."(s)",m)end end;l=i;j=b("Deposit",r,l)k=j:getChild("mainContent")k:addLabel():setText("Add "..CONFIG.CURRENCYNAME.."s inside the Dropper beneath you!"):setTextAlign("center"):setPosition("parent.w * 0.5 - self.w * 0.5 + 1","parent.h * 0.5")return j end;return h
