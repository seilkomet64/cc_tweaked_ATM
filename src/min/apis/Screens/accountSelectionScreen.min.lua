local a=require("atmAPI")local b=require("Screens.selectionBase")local c=require("Screens.errorDialog")local function d(e)local f=0;local g;local h;local i;local j,k,l;function j()while true do local m,n,o=os.pullEvent()if m=="key"then if n==keys.backspace then local p=tostring(f)p=p:sub(1,-2)if p==""then p="0"end;f=tonumber(p)or f;l(0)end;if n==keys.enter then k()end elseif m=="char"then local p=tostring(f)p=p..n;f=tonumber(p)or f;l(0)end end end;function k()if f<0 then c(g,h,{"Please enter a valid account number."})return elseif e.acc==f then c(g,h,{"Cannot transfer to the same account."})return end;local q,r=pcall(function()return a.existsAccount(f)end)if not q then c(g,h,{"Error checking account number."})return elseif not r then c(g,h,{"Account does not exist."})return else ChangeScreen(SCREENS.transferScreen,nil,{acc=e.acc,targetAcc=f,pin=e.pin})end end;g=b("Select Account",k,e)h=g:getChild("mainContent")local s=h:addFrame():setSize("parent.w","parent.h * 0.5 - 1"):setBackground(colors.lightGray)s:addLabel():setText("Which Account do you want to transfer to?"):setPosition("parent.w * 0.5 + 1 - self.w * 0.5","parent.h - 1")local t=h:addFrame():setSize("parent.w",3):setPosition(1,"parent.h * 0.5"):setBackground(colors.lightGray)local u={5,3}local v=t:addLabel():setText(0):setPosition("parent.w * 0.5 + 1 - self.w * 0.5",2)function l(w)f=f+w;if f<0 then f=0 end;v:setText(f)end;t:addButton():setText("-10"):setSize(u[1],u[2]):setPosition(2):onClick(function()l(-10)end)t:addButton():setText("-5"):setSize(u[1],u[2]):setPosition(8):onClick(function()l(-5)end)t:addButton():setText("-1"):setSize(u[1],u[2]):setPosition(14):onClick(function()l(-1)end)t:addButton():setText("+1"):setSize(u[1],u[2]):setPosition("parent.w - 17"):onClick(function()l(1)end)t:addButton():setText("+5"):setSize(u[1],u[2]):setPosition("parent.w - 11"):onClick(function()l(5)end)t:addButton():setText("+10"):setSize(u[1],u[2]):setPosition("parent.w - 5"):onClick(function()l(10)end)i=g:addThread()i:start(j)return g end;return d
